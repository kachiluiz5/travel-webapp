<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interest Selection</title>
    <link rel="stylesheet" href="../assets/css/style.css" />
  </head>
  <body>
    <div class="main add-intrest-main">
      <div class="add-interest-container">

              <!-- progressbar -->
      <div class="progress-bar">
        <div class="progress" id="progress"></div>
      </div>

      <h1>Tell us what you're interested in</h1>
      <p>Select all that apply.</p>

      <div class="interests-container" id="interestsContainer">
        <!-- Interests will be dynamically added here -->
      </div>

      <div id="addInterestModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2>Add a new interest</h2>
          <input
            type="text"
            id="newInterest"
            placeholder="Enter your interest"
          />
          <button id="addNewInterest">Add Interest</button>
        </div>
      </div>


      </div>
    </div>

    <div class="nav-buttons">
      <button>Back</button>
      <button>Next</button>
    </div>

    <script>
      const interests = [
        "Must-see Attractions",
        "Great Food",
        "Hidden Gems",
        "Beach Resorts",
        "Golfing",
        "Wellness Retreats",
        "Nightlife and Entertainment",
        "Cultural Landmarks",
        "Eco-Tourism",
        "History",
        "Outdoors",
        "Culture",
      ];

      const interestsContainer = document.getElementById("interestsContainer");
      const modal = document.getElementById("addInterestModal");
      const closeModal = document.getElementsByClassName("close")[0];
      const newInterestInput = document.getElementById("newInterest");
      const addNewInterestButton = document.getElementById("addNewInterest");

      function createInterestElement(interest) {
        const div = document.createElement("div");
        div.className = "interest";
        div.textContent = interest;
        div.onclick = () => div.classList.toggle("selected");
        return div;
      }

      interests.forEach((interest) => {
        interestsContainer.appendChild(createInterestElement(interest));
      });

      // Add the "Add interest" button
      const addInterestButton = createInterestElement("+ Add interest");
      addInterestButton.classList.add("add-interest");
      addInterestButton.onclick = () => (modal.style.display = "block");
      interestsContainer.appendChild(addInterestButton);

      closeModal.onclick = () => (modal.style.display = "none");

      window.onclick = (event) => {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      };

      addNewInterestButton.onclick = () => {
        const newInterest = newInterestInput.value.trim();
        if (newInterest) {
          interestsContainer.insertBefore(
            createInterestElement(newInterest),
            addInterestButton
          );
          newInterestInput.value = "";
          modal.style.display = "none";
        }
      };

      document.querySelector(".nav-button.submit").onclick = () => {
        const selectedInterests = Array.from(
          document.querySelectorAll(".interest.selected")
        ).map((el) => el.textContent);
        console.log("Selected interests:", selectedInterests);
        // Here you would typically send this data to your backend or move to the next step
      };

      document.querySelector(".nav-button.back").onclick = () => {
        // Here you would typically go back to the previous step in your booking process
        console.log("Going back to the previous step");
      };
    </script>
  </body>
</html>
